# 用户集合设计 (users)

本集合用于存储小程序的用户基本信息和核心业务数据。

**集合名称:** `users`

**数据结构:**

```json
{
  "_id": "string (云数据库自动生成)",
  "_openid": "string (用户的唯一标识，云开发自动注入)",
  "extract_count": 0,
  "share_count": 0,
  "points": 0,
  "created_at": "Date",
  "last_login_at": "Date"
}
```

### 字段说明

| 字段名          | 类型   | 必填 | 默认值 | 描述                                         |
| --------------- | ------ | ---- | ------ | -------------------------------------------- |
| `_id`           | String | 是   | 系统生成 | 数据库自动生成的唯一记录ID。                 |
| `_openid`       | String | 是   | 系统注入 | 用户的唯一身份凭证，**云开发自动注入，不可手动设置**。 |
| `extract_count` | Number | 是   | 0      | 用户总提取文案的次数。                       |
| `share_count`   | Number | 是   | 0      | 用户总分享小程序的次数。                     |
| `points`        | Number | 是   | 0      | 用户积分，可用于未来的激励或兑换。           |
| `created_at`    | Date   | 是   | -      | 记录用户首次进入小程序，创建记录的时间。     |
| `last_login_at` | Date   | 是   | -      | 记录用户每次启动小程序的时间，用于分析活跃度。 |

### 索引建议

建议在 `_openid` 字段上创建唯一索引，以确保每个用户只有一条记录，并加快查询速度。（云开发默认会为 `_openid` 创建索引）。
